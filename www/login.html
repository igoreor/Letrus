<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Color theme for statusbar (Android only) -->
    <meta name="theme-color" content="#2196f3">
    <!-- Your app title -->
    <title>Letrus</title>
    <!-- Path to Framework7 Library Bundle CSS -->
    <link rel="stylesheet" href="lib/framework7-bundle.min.css">
    <!-- CSS PERSONALIZADO PARA MENU-->
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/config.css">
    <link rel=" stylesheet" href = "css/ocr.css">
    <link rel=" stylesheet" href = "css/link5.css">
    <link rel=" stylesheet" href = "css/login.css">
    <link rel=" stylesheet" href = "css/register.css">
    <link rel=" stylesheet" href = "css/profile.css">
    <!--Ícones Material Design-->
    <link rel="stylesheet" href="css/materialdesignicons.min.css">

    <body>
        <!-- App Root -->
        <div id="app">
            <div class="view view-main">
                <!-- Login Page -->
                <div data-name="login" class="page">
                    <!-- Navbar -->
                    <div class="navbar">
                        <div class="navbar-bg"></div>
                        <div class="navbar-inner justify-content-center">
                            <div class="title">Login</div>
                        </div>
                    </div>
    
                    <!-- Conteúdo da Página -->
                    <div class="page-content">
                        <div class="block login-container">
                            <h2>Bem-vindo!</h2>
                            <p>Faça login para continuar</p>
                            <form id="login-form">
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" placeholder="Digite seu email" required>
                                </div>
                                <div class="form-group">
                                    <label for="password">Senha</label>
                                    <input type="password" id="password" placeholder="Digite sua senha" required>
                                </div>
                                <button type="submit" id="login-button" class="btn-login">Entrar</button>
                            </form>
                            <div class="register-link">
                                <p>Não tem uma conta? <a href="/register/" class="option-link">Cadastre-se</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Framework7 JS -->
        <script src="lib/framework7-bundle.min.js"></script>
        <!-- jQuery -->
        <script src="lib/jquery-3.7.0.min.js"></script>
        <!-- Rotas -->
        <script src="js/routes.js"></script>
        <!-- Cordova -->
        <script src="cordova.js"></script>
        <!-- JavaScript do Login -->
        <script>
            $(document).ready(function () {
                $('#login-form').on('submit', function (event) {
                    event.preventDefault(); // Evita o envio padrão do formulário
    
                    const userCredentials = {
                        email: $('#email').val(),
                        senha: $('#password').val()
                    };
    
                    $.ajax({
                        url: '/auth/login',
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(userCredentials),
                        success: function (response) {
                            alert('Login realizado com sucesso!');
                            window.location.href = 'index.html'; // Redireciona para a página principal
                        },
                        error: function (xhr) {
                            const errorMessages = {
                                401: 'Erro: Email ou senha inválidos.',
                                400: 'Erro: Preencha todos os campos corretamente.'
                            };
                            alert(errorMessages[xhr.status] || 'Erro ao realizar login.');
                        }
                    });
                });
            });
        </script>
    </body>
    
    </html>